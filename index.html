<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HR ACCESORIOS - Sistema de Inventario Multialmac√©n</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --primary:#1B4965;
  --primary-light:#5FA8D3;
  --accent:#F28C28;
  --dark:#2C3E50;
  --gray:#7F8C8D;
  --gray-light:#ECF0F1;
  --white:#FFFFFF;
  --success:#27AE60;
  --danger:#E74C3C;
  --warning:#F39C12;
  --ves:#3498DB;
  --ruta:#E67E22;
}
body{font-family:'Inter',sans-serif;background:#F5F7FA;color:var(--dark);line-height:1.6}
.container{max-width:1400px;margin:0 auto;padding:20px}

/* Header con selector de ubicaci√≥n */
header{background:var(--white);box-shadow:0 2px 8px rgba(0,0,0,0.08);position:sticky;top:0;z-index:1000;animation:slideDown .5s}
@keyframes slideDown{from{transform:translateY(-100%)}to{transform:translateY(0)}}
.header-content{display:flex;justify-content:space-between;align-items:center;max-width:1400px;margin:0 auto;padding:16px 20px;gap:20px;flex-wrap:wrap}
h1{font-family:'Poppins',sans-serif;font-size:1.6em;color:var(--primary);font-weight:800;letter-spacing:-.5px}
.logo-icon{width:40px;height:40px;background:linear-gradient(135deg,var(--primary),var(--primary-light));border-radius:10px;display:inline-flex;align-items:center;justify-content:center;color:var(--white);font-weight:800;font-size:1.2em;margin-right:10px;vertical-align:middle}

/* Selector de Ubicaci√≥n */
.location-selector{display:flex;gap:10px;background:var(--gray-light);padding:8px;border-radius:12px}
.location-btn{padding:10px 20px;border:none;border-radius:8px;font-weight:700;font-size:.9em;cursor:pointer;transition:all .3s;background:transparent;color:var(--dark)}
.location-btn.active{color:var(--white);box-shadow:0 4px 12px rgba(0,0,0,0.15)}
.location-btn.ves.active{background:var(--ves)}
.location-btn.ruta.active{background:var(--ruta)}
.location-btn:hover:not(.active){background:rgba(0,0,0,0.05)}

.header-actions{display:flex;gap:12px;align-items:center}
.cart-btn,.logistics-btn{background:var(--accent);color:var(--white);border:none;padding:12px 20px;border-radius:10px;font-size:.95em;cursor:pointer;font-weight:700;position:relative;transition:all .3s;display:inline-flex;align-items:center;gap:8px}
.logistics-btn{background:var(--primary)}
.cart-btn:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(242,140,40,0.3)}
.logistics-btn:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(27,73,101,0.3)}
.cart-count{position:absolute;top:-8px;right:-8px;background:var(--danger);color:var(--white);min-width:24px;height:24px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.8em;padding:0 6px;border:2px solid var(--white)}

/* Stats Cards */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin:20px 0}
.stat-card{background:var(--white);padding:20px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,0.06);border-left:4px solid var(--primary)}
.stat-card.ves{border-left-color:var(--ves)}
.stat-card.ruta{border-left-color:var(--ruta)}
.stat-label{font-size:.85em;color:var(--gray);font-weight:600;text-transform:uppercase;letter-spacing:.5px}
.stat-value{font-size:2em;font-weight:800;color:var(--dark);margin-top:8px}

/* Tabs */
.tabs{display:flex;gap:12px;margin:20px 0;border-bottom:2px solid var(--gray-light)}
.tab{padding:12px 24px;border:none;background:transparent;color:var(--gray);font-weight:600;font-size:.95em;cursor:pointer;border-bottom:3px solid transparent;transition:all .3s}
.tab:hover{color:var(--primary)}
.tab.active{color:var(--primary);border-bottom-color:var(--primary)}

/* Products Grid */
.products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;margin:20px 0}
.product-card{background:var(--white);border-radius:12px;padding:18px;box-shadow:0 2px 6px rgba(0,0,0,0.06);transition:all .3s;border:1px solid var(--gray-light)}
.product-card:hover{transform:translateY(-3px);box-shadow:0 6px 16px rgba(0,0,0,0.1)}
.product-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:10px}
.product-brand{background:var(--primary);color:var(--white);padding:4px 12px;border-radius:6px;font-size:.75em;font-weight:700}
.product-model{font-size:1.05em;font-weight:700;margin:6px 0;color:var(--dark)}
.product-design{font-size:.85em;color:var(--gray);margin-bottom:12px}

/* Stock Display */
.stock-display{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:12px 0;padding:10px;background:var(--gray-light);border-radius:8px}
.stock-item{text-align:center}
.stock-label{font-size:.7em;color:var(--gray);font-weight:600;text-transform:uppercase;display:block;margin-bottom:4px}
.stock-value{font-size:1.3em;font-weight:800;color:var(--dark)}
.stock-value.low{color:var(--warning)}
.stock-value.out{color:var(--danger)}
.stock-value.ves{color:var(--ves)}
.stock-value.ruta{color:var(--ruta)}

.quantity-section{display:flex;align-items:center;gap:10px;margin:12px 0}
.quantity-label{font-weight:600;color:var(--gray);font-size:.85em}
.quantity-controls{display:flex;align-items:center;gap:6px;background:var(--gray-light);border-radius:8px;padding:4px}
.qty-btn{background:var(--white);border:none;width:32px;height:32px;border-radius:6px;cursor:pointer;font-size:1.2em;font-weight:700;transition:all .2s;color:var(--primary)}
.qty-btn:hover{background:var(--primary);color:var(--white)}
.qty-input{width:45px;text-align:center;border:none;background:transparent;font-weight:700;font-size:1em}
.add-btn{width:100%;background:var(--accent);color:var(--white);border:none;padding:12px;border-radius:8px;font-size:.95em;font-weight:700;cursor:pointer;transition:all .3s}
.add-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 12px rgba(242,140,40,0.3)}
.add-btn:disabled{background:var(--gray);cursor:not-allowed;opacity:.5}

/* Modal */
.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.6);z-index:2000;animation:fadeIn .3s}
.modal.active{display:flex;align-items:center;justify-content:center;padding:20px}
.modal-content{background:var(--white);padding:30px;border-radius:16px;max-width:900px;max-height:90vh;overflow-y:auto;width:100%;animation:slideUp .4s}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid var(--gray-light)}
.modal-title{font-family:'Poppins',sans-serif;font-size:1.6em;color:var(--primary);font-weight:700}
.close-btn{background:none;border:none;font-size:2em;cursor:pointer;color:var(--gray);transition:all .2s;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px}
.close-btn:hover{color:var(--danger);background:rgba(231,76,60,0.1)}

/* Logistics Panel */
.logistics-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px;margin:16px 0}
.logistics-item{background:var(--gray-light);padding:14px;border-radius:10px;display:flex;justify-content:space-between;align-items:center}
.logistics-info{flex:1}
.logistics-name{font-weight:700;font-size:.9em;color:var(--dark);margin-bottom:4px}
.logistics-stock{font-size:.8em;color:var(--gray)}
.transfer-controls{display:flex;align-items:center;gap:8px}
.transfer-input{width:60px;padding:8px;border:2px solid var(--primary);border-radius:6px;text-align:center;font-weight:700}
.transfer-btn{background:var(--success);color:var(--white);border:none;padding:8px 14px;border-radius:6px;font-weight:700;cursor:pointer;font-size:.85em;transition:all .2s}
.transfer-btn:hover{background:#229954;transform:scale(1.05)}

/* Alerts */
.alert{padding:14px 18px;border-radius:10px;margin:12px 0;font-weight:600;font-size:.9em}
.alert.success{background:#D5F4E6;color:#0D6E3A;border-left:4px solid var(--success)}
.alert.warning{background:#FEF3D9;color:#9C6F19;border-left:4px solid var(--warning)}
.alert.danger{background:#FADBD8;color:#A41C00;border-left:4px solid var(--danger)}

/* Movement History */
.history-list{max-height:400px;overflow-y:auto}
.history-item{background:var(--gray-light);padding:12px;border-radius:8px;margin-bottom:8px;font-size:.85em}
.history-time{color:var(--gray);font-size:.8em}
.history-action{font-weight:700;color:var(--dark);margin:4px 0}
.history-detail{color:var(--gray)}

@media(max-width:768px){
  .header-content{flex-direction:column;align-items:stretch}
  h1{font-size:1.3em;text-align:center}
  .location-selector{justify-content:center}
  .header-actions{flex-direction:column;width:100%}
  .cart-btn,.logistics-btn{width:100%;justify-content:center}
  .stats-grid{grid-template-columns:1fr}
  .products-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>
<header>
<div class="header-content">
<h1><span class="logo-icon">HR</span>HR ACCESORIOS</h1>
<div class="location-selector">
<button class="location-btn ves active" onclick="setLocation('VES')" id="btnVES">
üì¶ Almac√©n VES
</button>
<button class="location-btn ruta" onclick="setLocation('Ruta')" id="btnRuta">
üöö Camioneta
</button>
</div>
<div class="header-actions">
<button class="logistics-btn" onclick="openLogistics()">
‚öôÔ∏è Log√≠stica
</button>
<button class="cart-btn" onclick="openCart()">
üõí Carrito
<span class="cart-count" id="cartCount">0</span>
</button>
</div>
</div>
</header>

<div class="container">
<!-- Stats -->
<div class="stats-grid">
<div class="stat-card ves">
<div class="stat-label">Stock Almac√©n VES</div>
<div class="stat-value" id="totalVES">0</div>
</div>
<div class="stat-card ruta">
<div class="stat-label">Stock en Ruta</div>
<div class="stat-value" id="totalRuta">0</div>
</div>
<div class="stat-card">
<div class="stat-label">Ubicaci√≥n Activa</div>
<div class="stat-value" id="activeLocation" style="font-size:1.3em;color:var(--primary)">VES</div>
</div>
</div>

<!-- Tabs -->
<div class="tabs">
<button class="tab active" onclick="showTab('ventas')">Ventas</button>
<button class="tab" onclick="showTab('inventario')">Inventario Completo</button>
<button class="tab" onclick="showTab('historial')">Historial</button>
</div>

<!-- Content Tabs -->
<div id="tabVentas">
<div id="alertContainer"></div>
<div class="products-grid" id="productsGrid"></div>
</div>

<div id="tabInventario" style="display:none">
<div class="products-grid" id="inventoryGrid"></div>
</div>

<div id="tabHistorial" style="display:none">
<div class="history-list" id="historyList"></div>
</div>
</div>

<!-- Cart Modal -->
<div class="modal" id="cartModal">
<div class="modal-content">
<div class="modal-header">
<h2 class="modal-title">üõí Carrito de Ventas</h2>
<button class="close-btn" onclick="closeCart()">√ó</button>
</div>
<div id="cartContent"></div>
</div>
</div>

<!-- Logistics Modal -->
<div class="modal" id="logisticsModal">
<div class="modal-content">
<div class="modal-header">
<h2 class="modal-title">‚öôÔ∏è Panel de Log√≠stica</h2>
<button class="close-btn" onclick="closeLogistics()">√ó</button>
</div>
<div id="logisticsContent">
<div class="alert warning">
<strong>‚ö†Ô∏è Carga de Camioneta:</strong> Selecciona productos del Almac√©n VES para trasladar a la Camioneta.
</div>
<div class="logistics-grid" id="logisticsGrid"></div>
</div>
</div>
</div>

<script>
// CAT√ÅLOGO SIMPLIFICADO CON INVENTARIO DUAL
const CATALOG_BASE = {
  "360 MARIPOSA MUJER": [
    {"marca":"SAMSUNG","modelo":"A06 4G","designs":["MORADO OSCURO","AZUL","ROSADO","BLANCO"]},
    {"marca":"SAMSUNG","modelo":"A16","designs":["MORADO OSCURO","AZUL","ROSADO"]},
    {"marca":"SAMSUNG","modelo":"A17/A26","designs":["MORADO OSCURO","AZUL","ROSADO"]}
  ],
  "SILICONE": [
    {"marca":"SAMSUNG","modelo":"A07","designs":["NEGRO","AZUL","LILA","PALO ROSA"]},
    {"marca":"HONOR","modelo":"X5B","designs":["NEGRO","AZUL","LILA","PALO ROSA"]}
  ]
};

// ESTADO GLOBAL
let currentLocation = 'VES';
let cart = [];
let inventory = [];
let movementHistory = [];

// INICIALIZAR INVENTARIO
function initInventory() {
  const saved = localStorage.getItem('hr_inventory');
  if (saved) {
    inventory = JSON.parse(saved);
  } else {
    // Generar inventario inicial
    inventory = [];
    Object.keys(CATALOG_BASE).forEach(cat => {
      CATALOG_BASE[cat].forEach(prod => {
        prod.designs.forEach(design => {
          inventory.push({
            id: `${prod.marca}-${prod.modelo}-${design}`.replace(/\s+/g,'-').replace(/\//g,'-'),
            marca: prod.marca,
            modelo: prod.modelo,
            category: cat,
            design: design,
            stock_VES: 50,
            stock_Ruta: 0,
            stock_minimo: 10
          });
        });
      });
    });
    saveInventory();
  }
  
  // Cargar historial
  const savedHistory = localStorage.getItem('hr_history');
  if (savedHistory) {
    movementHistory = JSON.parse(savedHistory);
  }
  
  updateStats();
}

function saveInventory() {
  localStorage.setItem('hr_inventory', JSON.stringify(inventory));
}

function saveHistory() {
  localStorage.setItem('hr_history', JSON.stringify(movementHistory));
}

function addToHistory(action, details) {
  movementHistory.unshift({
    timestamp: new Date().toISOString(),
    action: action,
    details: details,
    location: currentLocation
  });
  if (movementHistory.length > 100) movementHistory.pop();
  saveHistory();
}

// CAMBIAR UBICACI√ìN
function setLocation(loc) {
  currentLocation = loc;
  document.getElementById('btnVES').classList.toggle('active', loc === 'VES');
  document.getElementById('btnRuta').classList.toggle('active', loc === 'Ruta');
  document.getElementById('activeLocation').textContent = loc === 'VES' ? 'ALMAC√âN VES' : 'CAMIONETA';
  renderProducts();
  showAlert(`üìç Modo cambiado a: ${loc === 'VES' ? 'Almac√©n VES' : 'Camioneta en Ruta'}`, 'success');
}

// ACTUALIZAR ESTAD√çSTICAS
function updateStats() {
  const totalVES = inventory.reduce((sum, p) => sum + p.stock_VES, 0);
  const totalRuta = inventory.reduce((sum, p) => sum + p.stock_Ruta, 0);
  document.getElementById('totalVES').textContent = totalVES;
  document.getElementById('totalRuta').textContent = totalRuta;
}

// RENDERIZAR PRODUCTOS
function renderProducts() {
  const grid = document.getElementById('productsGrid');
  const available = inventory.filter(p => {
    const stock = currentLocation === 'VES' ? p.stock_VES : p.stock_Ruta;
    return stock > 0;
  });
  
  if (available.length === 0) {
    grid.innerHTML = '<div class="alert warning">No hay productos disponibles en esta ubicaci√≥n</div>';
    return;
  }
  
  grid.innerHTML = available.map(p => {
    const stock = currentLocation === 'VES' ? p.stock_VES : p.stock_Ruta;
    const stockClass = stock <= 0 ? 'out' : stock <= p.stock_minimo ? 'low' : (currentLocation === 'VES' ? 'ves' : 'ruta');
    
    return `
      <div class="product-card">
        <div class="product-header">
          <span class="product-brand">${p.marca}</span>
        </div>
        <div class="product-model">${p.modelo}</div>
        <div class="product-design">Dise√±o: ${p.design}</div>
        
        <div class="stock-display">
          <div class="stock-item">
            <span class="stock-label">VES</span>
            <span class="stock-value ves">${p.stock_VES}</span>
          </div>
          <div class="stock-item">
            <span class="stock-label">Ruta</span>
            <span class="stock-value ruta">${p.stock_Ruta}</span>
          </div>
        </div>
        
        <div class="quantity-section">
          <span class="quantity-label">Cantidad:</span>
          <div class="quantity-controls">
            <button class="qty-btn" onclick="changeQty('${p.id}', -1)">-</button>
            <input type="number" class="qty-input" id="qty-${p.id}" value="1" min="1" max="${stock}">
            <button class="qty-btn" onclick="changeQty('${p.id}', 1)">+</button>
          </div>
        </div>
        
        <button class="add-btn" onclick="addToCart('${p.id}')" ${stock <= 0 ? 'disabled' : ''}>
          ${stock <= 0 ? '‚ùå Sin Stock' : '‚ûï Agregar a Venta'}
        </button>
      </div>
    `;
  }).join('');
}

function changeQty(id, delta) {
  const input = document.getElementById(`qty-${id}`);
  let val = parseInt(input.value) + delta;
  const max = parseInt(input.max);
  if (val < 1) val = 1;
  if (val > max) val = max;
  input.value = val;
}

// AGREGAR AL CARRITO
function addToCart(productId) {
  const product = inventory.find(p => p.id === productId);
  if (!product) return;
  
  const qtyInput = document.getElementById(`qty-${productId}`);
  const qty = parseInt(qtyInput.value);
  const stock = currentLocation === 'VES' ? product.stock_VES : product.stock_Ruta;
  
  if (qty > stock) {
    showAlert('‚ùå Cantidad solicitada excede el stock disponible', 'danger');
    return;
  }
  
  const existingItem = cart.find(c => c.productId === productId && c.location === currentLocation);
  if (existingItem) {
    existingItem.quantity += qty;
  } else {
    cart.push({
      productId: productId,
      product: product,
      quantity: qty,
      location: currentLocation
    });
  }
  
  updateCartCount();
  showAlert(`‚úÖ Agregado: ${product.marca} ${product.modelo} (${product.design}) x${qty}`, 'success');
  qtyInput.value = 1;
}

function updateCartCount() {
  const total = cart.reduce((sum, c) => sum + c.quantity, 0);
  document.getElementById('cartCount').textContent = total;
}

// CARRITO
function openCart() {
  const modal = document.getElementById('cartModal');
  const content = document.getElementById('cartContent');
  
  if (cart.length === 0) {
    content.innerHTML = '<div class="alert warning">El carrito est√° vac√≠o</div>';
  } else {
    const totalItems = cart.reduce((sum, c) => sum + c.quantity, 0);
    
    let html = '<div style="margin-bottom:20px">';
    cart.forEach((item, idx) => {
      html += `
        <div style="background:var(--gray-light);padding:14px;border-radius:10px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center">
          <div>
            <strong>${item.product.marca} ${item.product.modelo}</strong><br>
            <span style="font-size:.85em;color:var(--gray)">Dise√±o: ${item.product.design} | Ubicaci√≥n: ${item.location}</span><br>
            <span style="font-weight:700;color:var(--accent)">Cantidad: ${item.quantity}</span>
          </div>
          <button class="remove-btn" onclick="removeFromCart(${idx})" style="background:var(--danger);color:white;border:none;padding:8px 14px;border-radius:6px;cursor:pointer;font-weight:600">Eliminar</button>
        </div>
      `;
    });
    html += '</div>';
    
    html += `<div style="background:var(--primary);color:white;padding:16px;border-radius:10px;text-align:center;font-size:1.3em;font-weight:700;margin-bottom:20px">Total: ${totalItems} productos</div>`;
    
    html += '<button class="add-btn" onclick="finalizeSale()" style="background:var(--success)">‚úÖ Confirmar Venta</button>';
    
    content.innerHTML = html;
  }
  
  modal.classList.add('active');
}

function closeCart() {
  document.getElementById('cartModal').classList.remove('active');
}

function removeFromCart(idx) {
  cart.splice(idx, 1);
  updateCartCount();
  openCart();
}

function finalizeSale() {
  if (cart.length === 0) return;
  
  // Descontar stock
  cart.forEach(item => {
    const product = inventory.find(p => p.id === item.productId);
    if (product) {
      if (item.location === 'VES') {
        product.stock_VES -= item.quantity;
      } else {
        product.stock_Ruta -= item.quantity;
      }
      
      addToHistory('VENTA', `${product.marca} ${product.modelo} (${product.design}) x${item.quantity} desde ${item.location}`);
    }
  });
  
  saveInventory();
  updateStats();
  renderProducts();
  
  showAlert(`‚úÖ Venta registrada: ${cart.length} productos vendidos desde ${currentLocation}`, 'success');
  
  cart = [];
  updateCartCount();
  closeCart();
}

// LOG√çSTICA
function openLogistics() {
  const modal = document.getElementById('logisticsModal');
  const grid = document.getElementById('logisticsGrid');
  
  const productsWithStock = inventory.filter(p => p.stock_VES > 0);
  
  grid.innerHTML = productsWithStock.map(p => `
    <div class="logistics-item">
      <div class="logistics-info">
        <div class="logistics-name">${p.marca} ${p.modelo}</div>
        <div class="logistics-stock">Dise√±o: ${p.design}</div>
        <div class="logistics-stock">Stock VES: <strong>${p.stock_VES}</strong></div>
      </div>
      <div class="transfer-controls">
        <input type="number" class="transfer-input" id="transfer-${p.id}" min="1" max="${p.stock_VES}" value="1">
        <button class="transfer-btn" onclick="transferToRoute('${p.id}')">‚Üí Ruta</button>
      </div>
    </div>
  `).join('');
  
  modal.classList.add('active');
}

function closeLogistics() {
  document.getElementById('logisticsModal').classList.remove('active');
}

function transferToRoute(productId) {
  const product = inventory.find(p => p.id === productId);
  if (!product) return;
  
  const input = document.getElementById(`transfer-${productId}`);
  const qty = parseInt(input.value);
  
  if (qty > product.stock_VES) {
    showAlert('‚ùå Cantidad excede stock disponible en VES', 'danger');
    return;
  }
  
  product.stock_VES -= qty;
  product.stock_Ruta += qty;
  
  saveInventory();
  updateStats();
  
  addToHistory('TRASLADO', `${product.marca} ${product.modelo} (${product.design}) x${qty} de VES ‚Üí Ruta`);
  
  showAlert(`‚úÖ Trasladado: ${qty} unidades a la Camioneta`, 'success');
  
  openLogistics();
  renderProducts();
}

// TABS
function showTab(tab) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  
  document.getElementById('tabVentas').style.display = tab === 'ventas' ? 'block' : 'none';
  document.getElementById('tabInventario').style.display = tab === 'inventario' ? 'block' : 'none';
  document.getElementById('tabHistorial').style.display = tab === 'historial' ? 'block' : 'none';
  
  if (tab === 'inventario') renderInventory();
  if (tab === 'historial') renderHistory();
}

function renderInventory() {
  const grid = document.getElementById('inventoryGrid');
  grid.innerHTML = inventory.map(p => `
    <div class="product-card">
      <div class="product-header">
        <span class="product-brand">${p.marca}</span>
      </div>
      <div class="product-model">${p.modelo}</div>
      <div class="product-design">${p.design}</div>
      <div class="stock-display">
        <div class="stock-item">
          <span class="stock-label">VES</span>
          <span class="stock-value ves">${p.stock_VES}</span>
        </div>
        <div class="stock-item">
          <span class="stock-label">Ruta</span>
          <span class="stock-value ruta">${p.stock_Ruta}</span>
        </div>
      </div>
    </div>
  `).join('');
}

function renderHistory() {
  const list = document.getElementById('historyList');
  if (movementHistory.length === 0) {
    list.innerHTML = '<div class="alert warning">No hay movimientos registrados</div>';
    return;
  }
  
  list.innerHTML = movementHistory.map(h => `
    <div class="history-item">
      <div class="history-time">${new Date(h.timestamp).toLocaleString('es-PE')}</div>
      <div class="history-action">${h.action}</div>
      <div class="history-detail">${h.details}</div>
    </div>
  `).join('');
}

// ALERTAS
function showAlert(message, type) {
  const container = document.getElementById('alertContainer');
  const alert = document.createElement('div');
  alert.className = `alert ${type}`;
  alert.textContent = message;
  container.innerHTML = '';
  container.appendChild(alert);
  setTimeout(() => alert.remove(), 5000);
}

// INICIALIZAR
initInventory();
renderProducts();
</script>
</body>
</html>
